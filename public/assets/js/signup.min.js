jQuery(function(e){"use strict";var s="";function a(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}function r(){var r=e("#emailML").val(),o=e("#passwordML").val();return""==r?(e("#login-email-err strong").html("Fill out this field"),e("#login-email-err").show(),!1):a(r)?""==o?(e("#passwordML").addClass("red_border"),e("#login-pwd-err strong").html("Fill out this field"),e("#login-pwd-err").show(),!1):(e("#login-email-err").hide(),e("#login-pwd-err").hide(),e("*").css("cursor","wait"),void e.ajax({type:"post",url:"/login/inside",dataType:"json",data:e("#signin-form-Modal").serialize(),success:function(a){if("email_err"==a.status)e("#login-email-err").show();else if("pwd_err"==a.status)e("#login-pwd-err").show();else if("deactive"==a.status)e("#signModal").modal("hide"),e.confirm({title:"Oops!",content:"Your account has been deactived.Contact support team to reactivate at support@adnlist.com",buttons:{specialKey:{text:"OK",action:function(){location.reload()}}}});else if("true"==a.status){if(e("#signModal").modal("hide"),"home"==(s=e(".current_page").val()))location.reload();else if("createpost"==s){if(!e("#nav_PreviewSubmit").hasClass("selected_nav"))return e("*").css("cursor","default"),!0;e(".form_post_detail").submit()}else location.reload();return!0}e("*").css("cursor","default")},error:function(s){"email_err"==data&&e("#login-email-err").show(),e("*").css("cursor","default")}})):(e("#emailML").addClass("red_border"),e("#login-email-err strong").html("Not email type"),e("#login-email-err").show(),!1)}e("#signup-form").submit(function(){let s=e(".signup-btn"),a=!1;return e(".invalid-feedback").removeClass("show"),!s.hasClass("btn-disable")&&(e(".signup-btn-text").hide(),e("#signup-spinner").addClass("show"),s.addClass("btn-disable"),s.addClass("dark-red"),e.ajax({url:"/register",type:"post",dataType:"json",data:e("#signup-form").serialize(),success:function(e){a=!0},error:function(r){console.log(r),console.log(r.responseJSON),r.responseJSON?"The given data was invalid."==r.responseJSON.message&&(e(".signup-btn-text").show(),e("#signup-spinner").removeClass("show"),s.removeClass("btn-disable"),s.removeClass("dark-red"),r.responseJSON.errors.email&&(e("#up-email-alert").addClass("show"),e("#up-email-alert").text(r.responseJSON.errors.email[0]),e("#signModal #email").focus()),r.responseJSON.errors.password&&(e("#up-pwd-alert").addClass("show"),e("#up-pwd-alert").text(r.responseJSON.errors.password[0]))):location.reload(),a=!1}}),!!a&&void 0)}),e(document).on("click","#btn_login_common_ajax",function(){r()}),e(document).on("click","#btn_register_common_ajax",function(){!function(){e(".alert_fill_input").hide();var r=e("#passwordCreate").val(),o=e("#passwordConfirm").val();if(s=e(".current_page").val(),e("#current_page").val(s),e("#signup-form-Modal .J_required_filed").each(function(){e(this).val()||(e(this).addClass("red_border"),e(this).parent().parent().find(".alert_fill_input").show())}),!e("#emailMR").val())return!1;if(!a(e("#emailMR").val()))return e("#emailMR").addClass("red_border"),e(".email_alert").html("Not type email!"),e(".email_alert").show(),!1;if(!e("#fnameM").val())return!1;if(!e("#lnameM").val())return!1;if(r==o){if(""==r)return e("#passwordCreate").addClass("red_border"),!1;e("*").css("cursor","wait"),e.ajax({type:"post",url:"/register/inside",dataType:"json",data:e("#signup-form-Modal").serialize(),success:function(a){if("email_err"==a.status)e("#register-email-err").removeClass("hide");else{if("true"==a.status)return e("#signModal").modal("hide"),"home"==s?location.reload():"createpost"==s&&(e("#nav_PreviewSubmit").hasClass("selected_nav")?e(".form_post_detail").submit():location.reload(),e("*").css("cursor","default")),!0;"verify"==a.status&&(e("#signModal").modal("hide"),e.confirm({title:"Success!",content:"Sent verification link to confirm your mail.",buttons:{specialKey:{text:"OK",action:function(){location.reload()}}}}))}e("*").css("cursor","default")},error:function(s){e("*").css("cursor","default")}})}else e("#create-pwd-err").css("display","block")}()}),e(document).on("click","#btn_publish_ajax",function(){e("*").css("cursor","wait"),e.ajax({type:"post",url:"/publish_verify",dataType:"json",data:e("#post_publish_form").serialize(),success:function(s){"ok"==s.status?(e("#passwordModal").modal(),console.log(s.status)):"no"==s.status&&(e("#gofinalpage").css("display","inline-block"),e("#btn_publish_ajax").css("display","none")),e("*").css("cursor","default")},error:function(s){"no"==data.status&&(e("#gofinalpage").css("display","inline-block"),e("#btn_publish_ajax").css("display","none")),e("*").css("cursor","default")}})}),e(document).on("click","#btn_create_password_ajax",function(){e("#passwordCreate").val()==e("#passwordConfirm").val()?(e("#create-pwd-err").css("display","none"),e("*").css("cursor","wait"),e.ajax({type:"post",url:"/createpassword",dataType:"json",data:e("#password-form-Modal").serialize(),success:function(s){"success"==s.status?(e("#gofinalpage").css("display","inline-block"),e("#btn_publish_ajax").css("display","none"),e("#passwordModal").modal("hide"),e.confirm({title:"Success!",content:"Your account created successfully.",buttons:{specialKey:{text:"OK",action:function(){location.reload()}}}})):s.status,e("*").css("cursor","default")},error:function(s){data,e("*").css("cursor","default")}})):e("#create-pwd-err").css("display","block")}),e("#signingM").on("change",function(){var s=e("#signingM").prop("checked");s?e("#btn_register_common_ajax").removeAttr("disabled"):s||e("#btn_register_common_ajax").attr("disabled","disabled")}),e(".modal_signin_form").css("display","none"),e(".btn_view_signin").click(function(){e(".modal_signin_form").css("display","block"),e(".modal_signup_form").css("display","none")}),e(".btn_view_signup").click(function(){e(".modal_signin_form").css("display","none"),e(".modal_signup_form").css("display","block")}),e(".email_verify_input").on("focus",function(){e(this).removeClass("red_border"),e(".email_verify_input").val("")}),e(".btn_email_verify").click(function(){var s=e(".email_verify_input").val();if(s.length<4)return e(".email_verify_input").addClass("red_border"),!1;e.ajax({url:"/emailverifytwo",data:{code:s},dataType:"json",type:"get",success:function(s){"ok"==s.status?location.reload():(e(".email_verify_input").val("Code doesn't matched!"),e(".email_verify_input").addClass("red_border"))},error:function(s){"email_err"==data&&e("#login-email-err").show()}}),e(".email_verify_input").val("")}),e(document).on("click",".dropdownAuth",function(){"createpost"==e(".current_page").val()&&e("#nav_PreviewSubmit").hasClass("selected_nav")&&(e(".toggle_register_submit").html("Submit Post"),e(".toggle_register_submit_text").html("you are creating account on AdnList and agreeing to AdnList"),e("#btn_login_common_ajax span").html("SUBMIT POST"),e("#btn_register_common_ajax span").html("SUBMIT POST"));var s=e(this).data("value");"login"==s?(e(".modal_signin_form").css("display","block"),e(".modal_signup_form").css("display","none")):"signup"==s&&(e(".modal_signin_form").css("display","none"),e(".modal_signup_form").css("display","block"))}),e(".J_required_filed").keydown(function(){e(this).hasClass("red_border")&&(e(this).removeClass("red_border"),e(this).parent().parent().find(".alert_fill_input").hide())}),e("#emailMR").keydown(function(){e("#emailMR").hasClass("red_border")&&(e("#emailMR").removeClass("red_border"),e(this).parent().parent().find(".alert_fill_input").show())}),e("#emailML").keydown(function(){e("#emailML").hasClass("red_border")&&e("#emailML").removeClass("red_border"),e("#login-email-err").hide()}),e(document).on("keydown","#passwordML",function(s){e("#passwordML").hasClass("red_border")&&e("#passwordML").removeClass("red_border"),e("#login-pwd-err").hide(),13==s.keyCode&&r()}),e(document).ready(function(){e(".alert_fill_input").hide()})});